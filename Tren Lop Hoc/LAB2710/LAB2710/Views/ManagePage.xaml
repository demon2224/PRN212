<Window x:Class="LAB2710.Views.ManagePage"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:LAB2710.ViewModels"
        mc:Ignorable="d"
        Title="ManagePage" Height="700" Width="1000"
        WindowStartupLocation="CenterScreen">
    
    <Window.DataContext>
        <vm:ManagePageViewModel/>
    </Window.DataContext>
    
    <Grid Background="#F5F5F5">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header Section -->
        <Border Grid.Row="0" Background="Orange" Padding="20,15">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <!-- Search Section -->
                <TextBox x:Name="SearchTextBox" 
                         Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                         Width="300" 
                         Height="35" 
                         VerticalContentAlignment="Center"
                         FontSize="14"
                         Margin="0,0,10,0"/>
                
                <Button Content="Search" 
                        Background="#007ACC" 
                        Foreground="White" 
                        Width="80" 
                        Height="35" 
                        BorderThickness="0"
                        FontWeight="Bold"
                        Command="{Binding SearchCommand}"
                        Margin="0,0,20,0"/>
                
                <Button Content="Export" 
                        Background="#28A745" 
                        Foreground="White" 
                        Width="80" 
                        Height="35" 
                        BorderThickness="0"
                        FontWeight="Bold"
                        Command="{Binding ExportToJsonCommand}"/>
            </StackPanel>
        </Border>
        
        <!-- Main Content -->
        <Grid Grid.Row="1" Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Games List -->
            <Border Grid.Row="0" Background="White" BorderBrush="Orange" BorderThickness="2" Margin="0,0,0,20">
                <DataGrid x:Name="GamesDataGrid"
                          ItemsSource="{Binding Games}"
                          SelectedItem="{Binding SelectedGame}"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          CanUserDeleteRows="False"
                          GridLinesVisibility="Horizontal"
                          HeadersVisibility="Column"
                          SelectionMode="Single"
                          FontSize="12">
                    
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding GameId}" Width="50" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Title" Binding="{Binding Title}" Width="*" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Genre" Binding="{Binding Genre}" Width="150" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Release Date" Binding="{Binding ReleaseDate, StringFormat='dd/MM/yyyy'}" Width="120" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Price ($)" Binding="{Binding Price, StringFormat='{}{0:F2}'}" Width="100" IsReadOnly="True"/>
                    </DataGrid.Columns>
                    
                    <DataGrid.RowStyle>
                        <Style TargetType="DataGridRow">
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="LightBlue"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.RowStyle>
                </DataGrid>
            </Border>
            
            <!-- Detail Section -->
            <Border Grid.Row="1" Background="White" BorderBrush="Orange" BorderThickness="2" Padding="20">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Detail Header -->
                    <TextBlock Grid.Row="0" Text="Detail" FontSize="16" FontWeight="Bold" Margin="0,0,0,15"/>
                    
                    <!-- Input Fields -->
                    <Grid Grid.Row="1" Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" Text="ID:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <TextBox Grid.Column="1" Text="{Binding SelectedGame.GameId}" IsReadOnly="True" Height="30" VerticalContentAlignment="Center" Margin="0,0,20,0"/>
                        
                        <TextBlock Grid.Column="2" Text="Title:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <TextBox Grid.Column="3" Text="{Binding Title, UpdateSourceTrigger=PropertyChanged}" Height="30" VerticalContentAlignment="Center" Margin="0,0,20,0"/>
                        
                        <TextBlock Grid.Column="4" Text="Genre:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <TextBox Grid.Column="5" Text="{Binding Genre, UpdateSourceTrigger=PropertyChanged}" Height="30" VerticalContentAlignment="Center"/>
                    </Grid>
                    
                    <!-- Additional Fields and Buttons -->
                    <Grid Grid.Row="2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel Grid.Column="0" Orientation="Horizontal">
                            <TextBlock Text="Release Date:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <DatePicker SelectedDate="{Binding ReleaseDate, UpdateSourceTrigger=PropertyChanged}" Width="130" Height="30" VerticalContentAlignment="Center" Margin="0,0,20,0"/>
                            
                            <TextBlock Text="Price ($):" VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <TextBox Text="{Binding Price, UpdateSourceTrigger=PropertyChanged}" Width="100" Height="30" VerticalContentAlignment="Center"/>
                        </StackPanel>
                        
                        <StackPanel Grid.Column="2" Orientation="Horizontal">
                            <Button Content="New" 
                                    Background="#28A745" 
                                    Foreground="White" 
                                    Width="60" 
                                    Height="35" 
                                    BorderThickness="0"
                                    FontWeight="Bold"
                                    Command="{Binding SaveCommand}"
                                    Margin="0,0,10,0"/>
                            
                            <Button Content="{Binding EditButtonText}" 
                                    Background="#007ACC" 
                                    Foreground="White" 
                                    Width="60" 
                                    Height="35" 
                                    BorderThickness="0"
                                    FontWeight="Bold"
                                    Command="{Binding EditCommand}"
                                    Margin="0,0,10,0"/>
                            
                            <Button Content="Delete" 
                                    Background="#DC3545" 
                                    Foreground="White" 
                                    Width="60" 
                                    Height="35" 
                                    BorderThickness="0"
                                    FontWeight="Bold"
                                    Command="{Binding DeleteCommand}"/>
                        </StackPanel>
                    </Grid>
                </Grid>
            </Border>
        </Grid>
        
        <!-- Footer Section -->
        <Border Grid.Row="3" 
                Background="Orange" 
                BorderBrush="Orange" 
                BorderThickness="2" 
                Margin="20,0,20,20">
            <TextBlock Text="{Binding TotalGamesText}" 
                       FontSize="14" 
                       FontWeight="Bold" 
                       Foreground="White" 
                       HorizontalAlignment="Left" 
                       VerticalAlignment="Center" 
                       Margin="15,10"/>
        </Border>
    </Grid>
</Window>